{
  "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
  "handler": "Microsoft.Azure.CreateUIDef",
  "version": "0.1.2-preview",
  "parameters": {
    "config": {
      "basics": {
        "description": "FinOps workbooks facilitate FinOps tasks that help you build, manage, and optimize cloud resources. [Learn more](https://aka.ms/finops/workbooks)",
        "location": {
          "label": "Location",
          "resourceTypes": ["Microsoft.Insights/workbooks"]
        }
      }
    },
    "resourceTypes": ["Microsoft.Insights/workbooks"],
    "basics": [
      {
        "name": "displayNamePrefix",
        "type": "Microsoft.Common.TextBox",
        "label": "Name",
        "defaultValue": "FinOps",
        "toolTip": "Prefix to use for each of the workbook names.",
        "constraints": {
          "required": true,
          "regex": "^.{1,220}$",
          "validationMessage": "Name cannot be longer than 250 characters."
        },
        "visible": true
      }
    ],
    "steps": [
      {
        "name": "workbooks",
        "label": "Workbooks",
        "elements": [
          {
            "name": "workbookSelectionIntro",
            "options": { "text": "Select the FinOps workbooks you would like to include in this deployment. You can select more later." },
            "type": "Microsoft.Common.TextBlock"
          },
          {
            "name": "includeOptimization",
            "label": "Optimization",
            "toolTip": "Select to include the optimization workbook.",
            "type": "Microsoft.Common.CheckBox"
          },
          {
            "name": "includeGovernance",
            "label": "Governance",
            "toolTip": "Select to include the governance workbook.",
            "type": "Microsoft.Common.CheckBox"
          }
        ]
      },
      {
        "name": "tags",
        "label": "Tags",
        "elements": [
          {
            "name": "tagsByResource",
            "label": "Tags",
            "toolTip": "Tags to apply.",
            "type": "Microsoft.Common.TagsByResource",
            "resources": ["Microsoft.Insights/workbooks"]
          }
        ]
      }
    ],
    "outputs": {
      "displayNamePrefix": "[basics('displayNamePrefix')]",
      "includeOptimization": "[basics('includeOptimization')]",
      "includeGovernance": "[basics('includeGovernance')]",
      "location": "[location()]",
      "tags": "[steps('tags').tagsByResource]"
    }
  }
}
